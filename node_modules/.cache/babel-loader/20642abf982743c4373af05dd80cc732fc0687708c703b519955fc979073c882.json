{"ast":null,"code":"/**\n * Custom hook for modal state management.\n * Handles opening, closing, and keyboard interactions for modals.\n */import{useState,useEffect,useCallback}from'react';export function useModal(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{closeOnEscape=true,closeOnBackdropClick=true,preventBodyScroll=true}=options;const[isOpen,setIsOpen]=useState(false);// Open modal\nconst openModal=useCallback(()=>{setIsOpen(true);},[]);// Close modal\nconst closeModal=useCallback(()=>{setIsOpen(false);},[]);// Toggle modal\nconst toggleModal=useCallback(()=>{setIsOpen(prev=>!prev);},[]);// Handle keyboard events\nuseEffect(()=>{if(!isOpen||!closeOnEscape)return;const handleKeyDown=event=>{if(event.key==='Escape'){closeModal();}};document.addEventListener('keydown',handleKeyDown);return()=>document.removeEventListener('keydown',handleKeyDown);},[isOpen,closeOnEscape,closeModal]);// Handle body scroll prevention\nuseEffect(()=>{if(!preventBodyScroll)return;if(isOpen){// Save original body style\nconst originalStyle=window.getComputedStyle(document.body).overflow;// Prevent scrolling\ndocument.body.style.overflow='hidden';// Cleanup\nreturn()=>{document.body.style.overflow=originalStyle;};}},[isOpen,preventBodyScroll]);// Backdrop click handler factory\nconst createBackdropClickHandler=useCallback(callback=>{return event=>{if(event.target===event.currentTarget){if(closeOnBackdropClick){closeModal();}callback===null||callback===void 0?void 0:callback();}};},[closeOnBackdropClick,closeModal]);return{isOpen,openModal,closeModal,toggleModal,createBackdropClickHandler};}/**\n * Hook for managing multiple modals with stack support\n */export function useModalStack(){const[modalStack,setModalStack]=useState([]);const openModal=useCallback(modalId=>{setModalStack(prev=>{if(prev.includes(modalId)){// If modal is already in stack, move it to top\nreturn[...prev.filter(id=>id!==modalId),modalId];}return[...prev,modalId];});},[]);const closeModal=useCallback(modalId=>{setModalStack(prev=>{if(modalId){// Close specific modal\nreturn prev.filter(id=>id!==modalId);}else{// Close topmost modal\nreturn prev.slice(0,-1);}});},[]);const closeAllModals=useCallback(()=>{setModalStack([]);},[]);const isModalOpen=useCallback(modalId=>{return modalStack.includes(modalId);},[modalStack]);const getTopModal=useCallback(()=>{return modalStack[modalStack.length-1]||null;},[modalStack]);const getModalZIndex=useCallback(modalId=>{const index=modalStack.indexOf(modalId);return index>=0?1000+index:-1;},[modalStack]);// Handle escape key for modal stack\nuseEffect(()=>{if(modalStack.length===0)return;const handleKeyDown=event=>{if(event.key==='Escape'){closeModal();// Close topmost modal\n}};document.addEventListener('keydown',handleKeyDown);return()=>document.removeEventListener('keydown',handleKeyDown);},[modalStack.length,closeModal]);// Body scroll prevention for modal stack\nuseEffect(()=>{if(modalStack.length>0){const originalStyle=window.getComputedStyle(document.body).overflow;document.body.style.overflow='hidden';return()=>{document.body.style.overflow=originalStyle;};}},[modalStack.length]);return{modalStack,openModal,closeModal,closeAllModals,isModalOpen,getTopModal,getModalZIndex,hasOpenModals:modalStack.length>0};}","map":{"version":3,"names":["useState","useEffect","useCallback","useModal","options","arguments","length","undefined","closeOnEscape","closeOnBackdropClick","preventBodyScroll","isOpen","setIsOpen","openModal","closeModal","toggleModal","prev","handleKeyDown","event","key","document","addEventListener","removeEventListener","originalStyle","window","getComputedStyle","body","overflow","style","createBackdropClickHandler","callback","target","currentTarget","useModalStack","modalStack","setModalStack","modalId","includes","filter","id","slice","closeAllModals","isModalOpen","getTopModal","getModalZIndex","index","indexOf","hasOpenModals"],"sources":["C:/Users/dan/Desktop/guru2/src/hooks/useModal.ts"],"sourcesContent":["/**\n * Custom hook for modal state management.\n * Handles opening, closing, and keyboard interactions for modals.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\n\ninterface UseModalOptions {\n  closeOnEscape?: boolean;\n  closeOnBackdropClick?: boolean;\n  preventBodyScroll?: boolean;\n}\n\nexport function useModal(options: UseModalOptions = {}) {\n  const {\n    closeOnEscape = true,\n    closeOnBackdropClick = true,\n    preventBodyScroll = true,\n  } = options;\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  // Open modal\n  const openModal = useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  // Close modal\n  const closeModal = useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  // Toggle modal\n  const toggleModal = useCallback(() => {\n    setIsOpen(prev => !prev);\n  }, []);\n\n  // Handle keyboard events\n  useEffect(() => {\n    if (!isOpen || !closeOnEscape) return;\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        closeModal();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, closeOnEscape, closeModal]);\n\n  // Handle body scroll prevention\n  useEffect(() => {\n    if (!preventBodyScroll) return;\n\n    if (isOpen) {\n      // Save original body style\n      const originalStyle = window.getComputedStyle(document.body).overflow;\n      \n      // Prevent scrolling\n      document.body.style.overflow = 'hidden';\n      \n      // Cleanup\n      return () => {\n        document.body.style.overflow = originalStyle;\n      };\n    }\n  }, [isOpen, preventBodyScroll]);\n\n  // Backdrop click handler factory\n  const createBackdropClickHandler = useCallback((callback?: () => void) => {\n    return (event: React.MouseEvent<HTMLDivElement>) => {\n      if (event.target === event.currentTarget) {\n        if (closeOnBackdropClick) {\n          closeModal();\n        }\n        callback?.();\n      }\n    };\n  }, [closeOnBackdropClick, closeModal]);\n\n  return {\n    isOpen,\n    openModal,\n    closeModal,\n    toggleModal,\n    createBackdropClickHandler,\n  };\n}\n\n/**\n * Hook for managing multiple modals with stack support\n */\nexport function useModalStack() {\n  const [modalStack, setModalStack] = useState<string[]>([]);\n\n  const openModal = useCallback((modalId: string) => {\n    setModalStack(prev => {\n      if (prev.includes(modalId)) {\n        // If modal is already in stack, move it to top\n        return [...prev.filter(id => id !== modalId), modalId];\n      }\n      return [...prev, modalId];\n    });\n  }, []);\n\n  const closeModal = useCallback((modalId?: string) => {\n    setModalStack(prev => {\n      if (modalId) {\n        // Close specific modal\n        return prev.filter(id => id !== modalId);\n      } else {\n        // Close topmost modal\n        return prev.slice(0, -1);\n      }\n    });\n  }, []);\n\n  const closeAllModals = useCallback(() => {\n    setModalStack([]);\n  }, []);\n\n  const isModalOpen = useCallback((modalId: string) => {\n    return modalStack.includes(modalId);\n  }, [modalStack]);\n\n  const getTopModal = useCallback(() => {\n    return modalStack[modalStack.length - 1] || null;\n  }, [modalStack]);\n\n  const getModalZIndex = useCallback((modalId: string) => {\n    const index = modalStack.indexOf(modalId);\n    return index >= 0 ? 1000 + index : -1;\n  }, [modalStack]);\n\n  // Handle escape key for modal stack\n  useEffect(() => {\n    if (modalStack.length === 0) return;\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        closeModal(); // Close topmost modal\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [modalStack.length, closeModal]);\n\n  // Body scroll prevention for modal stack\n  useEffect(() => {\n    if (modalStack.length > 0) {\n      const originalStyle = window.getComputedStyle(document.body).overflow;\n      document.body.style.overflow = 'hidden';\n      \n      return () => {\n        document.body.style.overflow = originalStyle;\n      };\n    }\n  }, [modalStack.length]);\n\n  return {\n    modalStack,\n    openModal,\n    closeModal,\n    closeAllModals,\n    isModalOpen,\n    getTopModal,\n    getModalZIndex,\n    hasOpenModals: modalStack.length > 0,\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}